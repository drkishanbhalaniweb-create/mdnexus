module.exports=[28758,a=>{"use strict";let b=(0,a.i(40541).default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],28758)},36238,a=>{"use strict";let b=(0,a.i(40541).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],36238)},2244,a=>{"use strict";let b=(0,a.i(40541).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],2244)},79587,a=>{"use strict";let b=(0,a.i(40541).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);a.s(["Award",()=>b],79587)},73586,a=>{"use strict";let b=(0,a.i(40541).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],73586)},18074,a=>{"use strict";let b=(0,a.i(40541).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],18074)},48338,a=>{"use strict";let b=(0,a.i(40541).default)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);a.s(["ThumbsUp",()=>b],48338)},80429,a=>{"use strict";let b=(0,a.i(40541).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],80429)},8828,a=>{"use strict";let b=(0,a.i(40541).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],8828)},85395,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(87080),g=a.i(85273),h=a.i(57748),i=a.i(73586),j=a.i(28758),k=a.i(36238),l=a.i(50944),m=a.i(48338),n=a.i(18074),o=a.i(80429),p=a.i(8828),q=a.i(2244),r=a.i(79587),s=a.i(15887),t=a.i(34059),u=b([g,s]);[g,s]=u.then?(await u)():u,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,u]=(0,e.useState)(!0),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)("all"),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)({}),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)({}),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(null);(0,e.useEffect)(()=>{M(),L()},[x]);let L=async()=>{let{data:{user:a}}=await f.supabase.auth.getUser();K(a)},M=async()=>{u(!0);try{let a=f.supabase.from("community_questions").select("*").order("created_at",{ascending:!1});"all"!==x&&(a=a.eq("status",x));let{data:c,error:d}=await a;if(d)throw d;b(c||[])}catch(a){console.error("Error:",a),s.toast.error("Failed to load questions")}finally{u(!1)}},N=async a=>{try{let{data:b,error:c}=await f.supabase.from("community_answers").select("*").eq("question_id",a).order("created_at",{ascending:!0});if(c)throw c;C(c=>({...c,[a]:b||[]}))}catch(a){console.error("Error:",a)}},O=async a=>{z===a?A(null):(A(a),B[a]||await N(a))},P=async a=>{if(window.confirm("Delete this question and all its answers?")){E(a);try{await f.supabase.from("community_answers").delete().eq("question_id",a);let{error:b}=await f.supabase.from("community_questions").delete().eq("id",a);if(b)throw b;s.toast.success("Question deleted"),M()}catch(a){console.error("Error:",a),s.toast.error("Failed to delete")}finally{E(null)}}},Q=async(b,c)=>{if(window.confirm("Delete this answer?"))try{let{error:d}=await f.supabase.from("community_answers").delete().eq("id",b);if(d)throw d;let e=a.find(a=>a.id===c);e&&await f.supabase.from("community_questions").update({answers_count:Math.max(0,(e.answers_count||1)-1)}).eq("id",c),s.toast.success("Answer deleted"),N(c),M()}catch(a){console.error("Error:",a),s.toast.error("Failed to delete")}},R=async(a,b)=>{try{let{error:c}=await f.supabase.from("community_questions").update({status:b}).eq("id",a);if(c)throw c;s.toast.success("Status updated"),M()}catch(a){s.toast.error("Failed to update status")}},S=async b=>{let c=F[b]?.trim();if(!c)return void s.toast.error("Please enter an answer");if(!J)return void s.toast.error("You must be logged in");I(b);try{let d={question_id:b,user_id:J.id,content:c,is_anonymous:!1,display_name:"Expert",is_expert_answer:!0,status:"published"},{data:e,error:g}=await f.supabase.from("community_answers").insert(d).select();if(g)throw console.error("Supabase error details:",g),g;await f.supabase.from("community_questions").update({answers_count:(a.find(a=>a.id===b)?.answers_count||0)+1}).eq("id",b),s.toast.success("Expert answer posted!"),G(a=>({...a,[b]:""})),N(b),M()}catch(a){console.error("Full error:",a),s.toast.error(a.message||"Failed to post answer")}finally{I(null)}},T=a.filter(a=>a.title.toLowerCase().includes(v.toLowerCase())||a.content.toLowerCase().includes(v.toLowerCase())),U=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,d.jsx)(h.default,{children:(0,d.jsxs)(g.default,{children:[(0,d.jsx)(t.default,{title:"Admin Community",noindex:!0}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Community Q&A Management"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,d.jsx)("input",{type:"text",placeholder:"Search...",value:v,onChange:a=>w(a.target.value),className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none w-48"})]}),(0,d.jsxs)("select",{value:x,onChange:a=>y(a.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none",children:[(0,d.jsx)("option",{value:"all",children:"All Status"}),(0,d.jsx)("option",{value:"published",children:"Published"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),c?(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"})}):0===T.length?(0,d.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[(0,d.jsx)(l.MessageSquare,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-slate-500",children:"No questions found"})]}):(0,d.jsx)("div",{className:"space-y-4",children:T.map(a=>(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full "+("published"===a.status?"bg-emerald-100 text-emerald-700":"pending"===a.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:a.status}),(0,d.jsx)("span",{className:"text-sm text-slate-500",children:U(a.created_at)})]}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:a.title}),(0,d.jsx)("p",{className:"text-slate-600 text-sm line-clamp-2",children:a.content}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(n.User,{className:"w-4 h-4"}),a.is_anonymous?"Anonymous":a.display_name||"User"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(m.ThumbsUp,{className:"w-4 h-4"}),a.upvotes||0]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(k.Eye,{className:"w-4 h-4"}),a.views||0]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(l.MessageSquare,{className:"w-4 h-4"}),a.answers_count||0]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("select",{value:a.status,onChange:b=>R(a.id,b.target.value),className:"text-sm px-2 py-1 border border-slate-200 rounded focus:ring-2 focus:ring-navy-600 focus:outline-none",children:[(0,d.jsx)("option",{value:"published",children:"Published"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"rejected",children:"Rejected"})]}),(0,d.jsx)("button",{onClick:()=>O(a.id),className:"p-2 text-slate-400 hover:text-navy-700 transition-colors",children:z===a.id?(0,d.jsx)(p.ChevronUp,{className:"w-5 h-5"}):(0,d.jsx)(o.ChevronDown,{className:"w-5 h-5"})}),(0,d.jsx)("button",{onClick:()=>P(a.id),disabled:D===a.id,className:"p-2 text-slate-400 hover:text-red-600 disabled:opacity-50 transition-colors",children:(0,d.jsx)(j.Trash2,{className:"w-5 h-5"})})]})]})}),z===a.id&&(0,d.jsxs)("div",{className:"border-t border-slate-100 bg-slate-50 p-4",children:[(0,d.jsxs)("div",{className:"mb-4 bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)(r.Award,{className:"w-5 h-5 text-amber-600"}),(0,d.jsx)("h4",{className:"font-medium text-amber-800",children:"Post Expert Answer"})]}),(0,d.jsx)("textarea",{value:F[a.id]||"",onChange:b=>G(c=>({...c,[a.id]:b.target.value})),placeholder:"Write your expert answer here...",rows:3,className:"w-full px-3 py-2 border border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none text-sm mb-2"}),(0,d.jsxs)("button",{onClick:()=>S(a.id),disabled:H===a.id,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50 transition-colors text-sm font-medium",children:[(0,d.jsx)(q.Send,{className:"w-4 h-4"}),H===a.id?"Posting...":"Post Expert Answer"]})]}),(0,d.jsxs)("h4",{className:"font-medium text-slate-700 mb-3",children:["Answers (",B[a.id]?.length||0,")"]}),B[a.id]?0===B[a.id].length?(0,d.jsx)("p",{className:"text-slate-500 text-sm",children:"No answers yet"}):(0,d.jsx)("div",{className:"space-y-3",children:B[a.id].map(b=>(0,d.jsxs)("div",{className:"bg-white rounded-lg p-3 relative "+(b.is_expert_answer?"ring-2 ring-amber-400":b.is_best_answer?"ring-2 ring-emerald-500":"border border-slate-200"),children:[b.is_expert_answer&&(0,d.jsx)("span",{className:"absolute -top-2 right-3 px-2 py-0.5 bg-amber-400 text-amber-900 text-xs font-semibold rounded-full",children:"Expert Answer"}),(0,d.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex-1",children:[b.is_best_answer&&!b.is_expert_answer&&(0,d.jsx)("span",{className:"text-xs font-medium text-emerald-600 mb-1 block",children:"Accepted Answer"}),(0,d.jsx)("p",{className:"text-slate-700 text-sm",children:b.content}),(0,d.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-500",children:[(0,d.jsx)("span",{children:b.is_anonymous?"Anonymous":b.display_name||"User"}),(0,d.jsx)("span",{children:U(b.created_at)}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(m.ThumbsUp,{className:"w-3 h-3"}),b.upvotes||0]})]})]}),(0,d.jsx)("button",{onClick:()=>Q(b.id,a.id),className:"p-1 text-slate-400 hover:text-red-600",children:(0,d.jsx)(j.Trash2,{className:"w-4 h-4"})})]})]},b.id))}):(0,d.jsx)("p",{className:"text-slate-500 text-sm",children:"Loading answers..."})]})]},a.id))})]})]})})}]),c()}catch(a){c(a)}},!1),50840,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(85395),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/community",pathname:"/admin/community",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/community",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_8a5bca4e._.js.map