module.exports=[44280,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(90836),g=a.i(5953),h=a.i(109),i=a.i(22114),j=b([h]);[h]=j.then?(await j)():j,a.s(["default",0,({contact:a,isOpen:b,onClose:c,onDelete:j})=>{let[k,l]=(0,e.useState)("details"),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(!1);if(!b||!a)return null;let q=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",onClick:a=>{a.target===a.currentTarget&&c()},role:"dialog","aria-modal":"true","aria-labelledby":"contact-detail-title",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg sm:rounded-xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] flex flex-col shadow-2xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-slate-200",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,d.jsx)("h2",{id:"contact-detail-title",className:"text-xl sm:text-2xl font-bold text-slate-900 truncate",children:"Contact Details"}),(0,d.jsxs)("p",{className:"text-xs sm:text-sm text-slate-500 mt-1 truncate",children:[a.name," â€¢ ",q(a.created_at)]})]}),(0,d.jsx)("button",{onClick:c,className:"text-slate-400 hover:text-slate-600 transition-colors flex-shrink-0","aria-label":"Close modal",children:(0,d.jsx)(f.X,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,d.jsx)("div",{className:"border-b border-slate-200 px-4 sm:px-6 overflow-x-auto",children:(0,d.jsx)("nav",{className:"flex space-x-4 sm:space-x-8 min-w-max","aria-label":"Contact detail tabs",children:[{id:"details",label:"Details"},{id:"documents",label:"Documents"},{id:"activity",label:"Activity"}].map(a=>(0,d.jsx)("button",{onClick:()=>l(a.id),className:`
                    py-3 sm:py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors
                    ${k===a.id?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}
                  `,"aria-current":k===a.id?"page":void 0,children:a.label},a.id))})}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:["details"===k&&(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Name"}),(0,d.jsx)("p",{className:"text-slate-900 mt-1",children:a.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Email"}),(0,d.jsx)("p",{className:"text-slate-900 mt-1",children:a.email})]}),a.phone&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Phone"}),(0,d.jsx)("p",{className:"text-slate-900 mt-1",children:a.phone})]}),a.subject&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Subject"}),(0,d.jsx)("p",{className:"text-slate-900 mt-1",children:a.subject})]}),a.service_interest&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Service Interest"}),(0,d.jsx)("p",{className:"text-slate-900 mt-1",children:a.service_interest})]})]}),a.message&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700 block mb-3",children:"Message / Form Data"}),(0,d.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:(0,d.jsx)(g.default,{data:a.message,formType:a.form_type||null})})]})]}),"documents"===k&&(0,d.jsx)("div",{children:(0,d.jsx)(h.default,{contactId:a.id,onFileClick:a=>{n(a)}})}),"activity"===k&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Submission Timeline"}),(0,d.jsx)("div",{className:"space-y-3",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-indigo-600 rounded-full mt-2"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Form Submitted"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:q(a.created_at)})]})]})})]}),(0,d.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"Additional activity tracking coming soon"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 p-4 sm:p-6 border-t border-slate-200 bg-slate-50",children:[(0,d.jsx)("div",{className:"order-2 sm:order-1",children:o&&(0,d.jsx)("p",{className:"text-xs sm:text-sm text-red-600 font-medium text-center sm:text-left",children:"Click Delete again to confirm"})}),(0,d.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 order-1 sm:order-2",children:[(0,d.jsx)("button",{onClick:c,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-white transition-colors text-sm sm:text-base",children:"Close"}),(0,d.jsx)("button",{onClick:()=>{o?(j(a.id),c()):p(!0)},className:`px-4 py-2 rounded-lg transition-colors text-sm sm:text-base ${o?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"}`,children:o?"Confirm Delete":"Delete"})]})]})]})}),m&&(0,d.jsx)(i.default,{file:m,isOpen:!!m,onClose:()=>n(null)})]})}]),c()}catch(a){c(a)}},!1),93560,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(87080),g=a.i(85273),h=a.i(57748),i=a.i(44280),j=a.i(26165),k=a.i(18060),l=a.i(61877),m=a.i(73586),n=a.i(31112),o=a.i(1118),p=a.i(71187),q=a.i(36238),r=a.i(28758),s=a.i(72818),t=a.i(54607),u=a.i(15887),v=a.i(34059),w=b([g,i,u]);[g,i,u]=w.then?(await w)():w,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)({}),[D,E]=(0,e.useState)(null);(0,e.useEffect)(()=>{F()},[]);let F=async()=>{w(!0),E(null);try{let{data:a,error:c}=await f.supabase.from("contacts").select("*").order("created_at",{ascending:!1});if(c)throw c;b(a),a&&a.length>0&&await G(a.map(a=>a.id))}catch(a){console.error("Error fetching contacts:",a),E("Failed to load contacts. Please try again."),u.toast.error("Failed to load contacts")}finally{w(!1)}},G=async a=>{try{let{data:b,error:c}=await f.supabase.from("file_uploads").select("contact_id").in("contact_id",a);if(c)throw c;let d={};b.forEach(a=>{d[a.contact_id]=(d[a.contact_id]||0)+1}),C(d)}catch(a){console.error("Error fetching file counts:",a)}},H=async c=>{try{let{error:d}=await f.supabase.from("contacts").delete().eq("id",c);if(d)throw d;b(a.filter(a=>a.id!==c)),A(null),u.toast.success("Contact deleted")}catch(a){console.error("Error deleting contact:",a),u.toast.error("Failed to delete contact")}},I=(0,l.useDebounce)(x,300),J=(0,e.useMemo)(()=>{if(!I)return a;let b=I.toLowerCase();return a.filter(a=>a.name?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.subject?.toLowerCase().includes(b))},[a,I]);return(0,d.jsx)(h.default,{children:(0,d.jsxs)(g.default,{children:[(0,d.jsx)(v.default,{title:"Admin Contacts",noindex:!0}),(0,d.jsx)(j.default,{errorMessage:"Failed to load contacts page",children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Contacts"}),(0,d.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage form submissions"})]})}),(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-slate-200",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("label",{htmlFor:"contact-search",className:"sr-only",children:"Search contacts"}),(0,d.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400","aria-hidden":"true"}),(0,d.jsx)("input",{id:"contact-search",type:"text",placeholder:"Search contacts...",value:x,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Search contacts by name, email, or subject"})]})}),D&&(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-red-200",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:(0,d.jsx)(t.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Failed to Load Contacts"}),(0,d.jsx)("p",{className:"text-slate-600 mb-6",children:D}),(0,d.jsx)("button",{onClick:F,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]}),!D&&(c||J.length>0)?(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,d.jsx)("thead",{className:"bg-slate-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contact"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Subject"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Files"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:c?(0,d.jsx)(k.TableRowSkeleton,{columns:6,rows:5}):J.map(a=>{let b,c=B[a.id]||0;return(0,d.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.name})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,d.jsxs)("div",{className:"text-sm text-slate-900 flex items-center space-x-1",children:[(0,d.jsx)(n.Mail,{className:"w-4 h-4 text-slate-400"}),(0,d.jsx)("span",{children:a.email})]}),a.phone&&(0,d.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1 mt-1",children:[(0,d.jsx)(o.Phone,{className:"w-4 h-4 text-slate-400"}),(0,d.jsx)("span",{children:a.phone})]})]}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("div",{className:"text-sm text-slate-900",children:a.subject})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:c>0?(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(s.FileText,{className:"w-4 h-4 text-indigo-600"}),(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[c," ",1===c?"file":"files"]})]}):(0,d.jsx)("span",{className:"text-sm text-slate-400",children:"No files"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1",children:[(0,d.jsx)(p.Calendar,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:(b=a.created_at,new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,d.jsx)("button",{onClick:()=>A(a),className:"text-indigo-600 hover:text-teal-900 mr-3","aria-label":`View details for ${a.name}`,title:"View contact details",children:(0,d.jsx)(q.Eye,{className:"w-5 h-5","aria-hidden":"true"})}),(0,d.jsx)("button",{onClick:()=>H(a.id),className:"text-red-600 hover:text-red-900","aria-label":`Delete contact ${a.name}`,title:"Delete contact",children:(0,d.jsx)(r.Trash2,{className:"w-5 h-5","aria-hidden":"true"})})]})]},a.id)})})]})})}):!D&&0===J.length&&(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-slate-200",children:[(0,d.jsx)(n.Mail,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-slate-600",children:"No contacts found"}),x&&(0,d.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Try adjusting your search"})]}),(0,d.jsx)(i.default,{contact:z,isOpen:!!z,onClose:()=>A(null),onDelete:H})]})})]})})}]),c()}catch(a){c(a)}},!1),49013,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(93560),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/contacts",pathname:"/admin/contacts",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/contacts",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_6cd40b58._.js.map