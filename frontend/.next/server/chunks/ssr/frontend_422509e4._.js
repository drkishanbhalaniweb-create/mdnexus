module.exports=[7487,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(90836),g=a.i(5953),h=a.i(109),i=a.i(22114),j=b([h]);[h]=j.then?(await j)():j,a.s(["default",0,({submission:a,isOpen:b,onClose:c})=>{var j,k;let l,[m,n]=(0,e.useState)("details"),[o,p]=(0,e.useState)(null);if(!b||!a)return null;let q=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:a.full_name}),(0,d.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,d.jsx)("span",{className:"text-sm text-slate-600",children:{quick_intake:"Quick Intake",aid_attendance:"Aid & Attendance",unsure:"Unsure",general:"General"}[j=a.form_type]||j}),(0,d.jsx)("span",{className:"text-slate-300",children:"â€¢"}),(k=a.status,l={new:"bg-navy-100 text-navy-800",contacted:"bg-yellow-100 text-yellow-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",closed:"bg-slate-100 text-slate-800"},(0,d.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l[k]||l.new}`,children:k.replace("_"," ")}))]})]}),(0,d.jsx)("button",{onClick:c,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,d.jsx)(f.X,{className:"w-6 h-6"})})]}),(0,d.jsxs)("div",{className:"flex border-b border-slate-200 px-6",children:[(0,d.jsx)("button",{onClick:()=>n("details"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"details"===m?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Details"}),(0,d.jsx)("button",{onClick:()=>n("documents"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"documents"===m?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Documents"}),(0,d.jsx)("button",{onClick:()=>n("activity"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"activity"===m?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Activity"})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["details"===m&&(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Contact Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Email"}),(0,d.jsx)("p",{className:"text-sm text-slate-900",children:a.email})]}),a.phone&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Phone"}),(0,d.jsx)("p",{className:"text-sm text-slate-900",children:a.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Submitted"}),(0,d.jsx)("p",{className:"text-sm text-slate-900",children:q(a.created_at)})]}),a.completed_at&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Completed"}),(0,d.jsx)("p",{className:"text-sm text-slate-900",children:q(a.completed_at)})]})]})]}),a.form_data&&Object.keys(a.form_data).length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Form Details"}),(0,d.jsx)(g.default,{data:a.form_data,formType:a.form_type})]}),a.notes&&(0,d.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Admin Notes"}),(0,d.jsx)("p",{className:"text-sm text-slate-900 whitespace-pre-wrap",children:a.notes})]}),a.assigned_to&&(0,d.jsxs)("div",{className:"bg-navy-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Assigned To"}),(0,d.jsx)("p",{className:"text-sm text-slate-900",children:a.assigned_to})]})]}),"documents"===m&&(0,d.jsx)(h.default,{formSubmissionId:a.id,onFileClick:a=>p(a)}),"activity"===m&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-indigo-600 rounded-full"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Form Submitted"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:q(a.created_at)})]})]}),a.updated_at!==a.created_at&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-navy-600 rounded-full"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Last Updated"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:q(a.updated_at)})]})]}),a.completed_at&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-green-600 rounded-full"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Completed"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:q(a.completed_at)})]})]})]})]}),(0,d.jsx)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:(0,d.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Close"})})]})}),(0,d.jsx)(i.default,{file:o,isOpen:!!o,onClose:()=>p(null)})]})}]),c()}catch(a){c(a)}},!1),39987,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(87080),g=a.i(85273),h=a.i(57748),i=a.i(7487),j=a.i(26165),k=a.i(18060),l=a.i(61877),m=a.i(73586),n=a.i(71187),o=a.i(36238),p=a.i(56643),q=a.i(72818),r=a.i(31112),s=a.i(1118),t=a.i(54607),u=a.i(15887),v=a.i(34059),w=b([g,i,u]);[g,i,u]=w.then?(await w)():w,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)("all"),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)({}),[F,G]=(0,e.useState)(null);(0,e.useEffect)(()=>{H()},[]);let H=async()=>{w(!0),G(null);try{let{data:a,error:c}=await f.supabase.from("form_submissions").select("*").order("created_at",{ascending:!1});if(c)throw c;b(a),a&&a.length>0&&await I(a.map(a=>a.id))}catch(a){console.error("Error fetching form submissions:",a),G("Failed to load form submissions. Please try again."),u.toast.error("Failed to load form submissions")}finally{w(!1)}},I=async a=>{try{let{data:b,error:c}=await f.supabase.from("file_uploads").select("form_submission_id").in("form_submission_id",a);if(c)throw c;let d={};b.forEach(a=>{d[a.form_submission_id]=(d[a.form_submission_id]||0)+1}),E(d)}catch(a){console.error("Error fetching file counts:",a)}},J=(0,l.useDebounce)(x,300),K=(0,e.useMemo)(()=>a.filter(a=>{if("all"!==z&&a.form_type!==z)return!1;if(J){let b=J.toLowerCase();return a.full_name?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.form_type?.toLowerCase().includes(b)}return!0}),[a,z,J]);return(0,d.jsx)(h.default,{children:(0,d.jsxs)(g.default,{children:[(0,d.jsx)(v.default,{title:"Form Submissions",noindex:!0}),(0,d.jsx)(j.default,{errorMessage:"Failed to load form submissions page",children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Form Submissions"}),(0,d.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage all form submissions"})]})}),(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-slate-200",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,d.jsxs)("div",{className:"flex-1 relative",children:[(0,d.jsx)("label",{htmlFor:"submission-search",className:"sr-only",children:"Search form submissions"}),(0,d.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400","aria-hidden":"true"}),(0,d.jsx)("input",{id:"submission-search",type:"text",placeholder:"Search by name, email, or form type...",value:x,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Search form submissions by name, email, or form type"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("label",{htmlFor:"form-type-filter",className:"sr-only",children:"Filter by form type"}),(0,d.jsx)(p.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400","aria-hidden":"true"}),(0,d.jsxs)("select",{id:"form-type-filter",value:z,onChange:a=>A(a.target.value),className:"pl-10 pr-8 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white","aria-label":"Filter form submissions by type",children:[(0,d.jsx)("option",{value:"all",children:"All Forms"}),(0,d.jsx)("option",{value:"quick_intake",children:"Quick Intake"}),(0,d.jsx)("option",{value:"aid_attendance",children:"Aid & Attendance"}),(0,d.jsx)("option",{value:"unsure",children:"Unsure"}),(0,d.jsx)("option",{value:"general",children:"General"})]})]})]})}),F&&(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-red-200",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:(0,d.jsx)(t.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Failed to Load Submissions"}),(0,d.jsx)("p",{className:"text-slate-600 mb-6",children:F}),(0,d.jsx)("button",{onClick:H,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]}),!F&&(c||K.length>0)?(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,d.jsx)("thead",{className:"bg-slate-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contact"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Form Type"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Files"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:c?(0,d.jsx)(k.TableRowSkeleton,{columns:7,rows:5}):K.map(a=>{var b,c;let e,f,g=D[a.id]||0;return(0,d.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.full_name})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,d.jsxs)("div",{className:"text-sm text-slate-900 flex items-center space-x-1",children:[(0,d.jsx)(r.Mail,{className:"w-4 h-4 text-slate-400"}),(0,d.jsx)("span",{children:a.email})]}),a.phone&&(0,d.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1 mt-1",children:[(0,d.jsx)(s.Phone,{className:"w-4 h-4 text-slate-400"}),(0,d.jsx)("span",{children:a.phone})]})]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-slate-900",children:{quick_intake:"Quick Intake",aid_attendance:"Aid & Attendance",unsure:"Unsure",general:"General"}[b=a.form_type]||b})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(c=a.status,e={new:"bg-navy-100 text-navy-800",contacted:"bg-yellow-100 text-yellow-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",closed:"bg-slate-100 text-slate-800"},(0,d.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e[c]||e.new}`,children:c.replace("_"," ")}))}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:g>0?(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(q.FileText,{className:"w-4 h-4 text-indigo-600"}),(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[g," ",1===g?"file":"files"]})]}):(0,d.jsx)("span",{className:"text-sm text-slate-400",children:"No files"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1",children:[(0,d.jsx)(n.Calendar,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:(f=a.created_at,new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsx)("button",{onClick:()=>C(a),className:"text-indigo-600 hover:text-teal-900","aria-label":`View details for ${a.full_name}`,title:"View submission details",children:(0,d.jsx)(o.Eye,{className:"w-5 h-5","aria-hidden":"true"})})})]},a.id)})})]})})}):!F&&0===K.length&&(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-slate-200",children:[(0,d.jsx)(q.FileText,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-slate-600",children:"No form submissions found"}),x&&(0,d.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Try adjusting your search or filter"})]}),(0,d.jsx)(i.default,{submission:B,isOpen:!!B,onClose:()=>C(null)})]})})]})})}]),c()}catch(a){c(a)}},!1),43872,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(39987),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/form-submissions",pathname:"/admin/form-submissions",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/form-submissions",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_422509e4._.js.map