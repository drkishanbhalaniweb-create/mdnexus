module.exports=[48730,a=>{"use strict";let b=(0,a.i(40541).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],48730)},5227,a=>{"use strict";let b=(0,a.i(40541).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["ShieldCheck",()=>b],5227)},68490,a=>{"use strict";let b=(0,a.i(40541).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>b],68490)},3883,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(87080),g=a.i(90836),h=a.i(1341),i=a.i(36238),j=a.i(48730),k=a.i(66056),l=a.i(5227),m=a.i(68490),n=a.i(15887),o=b([n]);[n]=o.then?(await o)():o,a.s(["default",0,({onClose:a,onSuccess:b})=>{let[c,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)({email:"",password:"",confirmPassword:"",full_name:"",role:"admin"}),[t,u]=(0,e.useState)({}),v=[{value:"super_admin",label:"Super Admin",description:"Full access to all features including user management",icon:l.ShieldCheck,color:"text-purple-600"},{value:"admin",label:"Admin",description:"Can manage content, view submissions, and handle payments",icon:k.Shield,color:"text-navy-600"},{value:"editor",label:"Editor",description:"Can create and edit blog posts and services",icon:m.Edit2,color:"text-green-600"}],w=a=>{let{name:b,value:c}=a.target;s({...r,[b]:c}),t[b]&&u({...t,[b]:null})},x=async a=>{let c;if(a.preventDefault(),c={},r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(c.email="Invalid email format"):c.email="Email is required",r.password?r.password.length<8&&(c.password="Password must be at least 8 characters"):c.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(c.confirmPassword="Passwords do not match"):c.confirmPassword="Please confirm password",r.full_name?r.full_name.length<2&&(c.full_name="Full name must be at least 2 characters"):c.full_name="Full name is required",r.role||(c.role="Role is required"),u(c),0!==Object.keys(c).length)return void n.toast.error("Please fix the errors in the form");o(!0);try{let{data:{session:a}}=await f.supabase.auth.getSession();if(!a)throw Error("No active session");let{data:c,error:d}=await f.supabase.functions.invoke("create-admin-user",{body:{email:r.email,password:r.password,full_name:r.full_name,role:r.role}});if(d)throw d;if(!c.success)throw Error(c.error||"Failed to create admin user");n.toast.success(`Admin user ${r.email} created successfully!`),b()}catch(a){console.error("Error creating admin user:",a),n.toast.error(a.message||"Failed to create admin user")}finally{o(!1)}};return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Admin User"}),(0,d.jsx)("button",{onClick:a,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,d.jsx)(g.X,{className:"w-6 h-6"})})]}),(0,d.jsxs)("form",{onSubmit:x,className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Full Name *"}),(0,d.jsx)("input",{type:"text",name:"full_name",value:r.full_name,onChange:w,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t.full_name?"border-red-500":"border-slate-300"}`,placeholder:"John Doe"}),t.full_name&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.full_name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email Address *"}),(0,d.jsx)("input",{type:"email",name:"email",value:r.email,onChange:w,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t.email?"border-red-500":"border-slate-300"}`,placeholder:"admin@example.com"}),t.email&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Password *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:p?"text":"password",name:"password",value:r.password,onChange:w,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 pr-12 ${t.password?"border-red-500":"border-slate-300"}`,placeholder:"••••••••"}),(0,d.jsx)("button",{type:"button",onClick:()=>q(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:p?(0,d.jsx)(j.EyeOff,{className:"w-5 h-5"}):(0,d.jsx)(i.Eye,{className:"w-5 h-5"})})]}),t.password&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.password}),(0,d.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Minimum 8 characters"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Confirm Password *"}),(0,d.jsx)("input",{type:p?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:w,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${t.confirmPassword?"border-red-500":"border-slate-300"}`,placeholder:"••••••••"}),t.confirmPassword&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.confirmPassword})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Role *"}),(0,d.jsx)("div",{className:"space-y-3",children:v.map(a=>{let b=a.icon;return(0,d.jsxs)("label",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ${r.role===a.value?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:[(0,d.jsx)("input",{type:"radio",name:"role",value:a.value,checked:r.role===a.value,onChange:w,className:"mt-1 mr-3"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(b,{className:`w-5 h-5 ${a.color}`}),(0,d.jsx)("span",{className:"font-semibold text-slate-900",children:a.label})]}),(0,d.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:a.description})]})]},a.value)})}),t.role&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.role})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-slate-200",children:[(0,d.jsx)("button",{type:"button",onClick:a,className:"px-6 py-3 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",disabled:c,children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.Loader2,{className:"w-5 h-5 animate-spin"}),(0,d.jsx)("span",{children:"Creating..."})]}):(0,d.jsx)("span",{children:"Create Admin User"})})]})]})]})})}]),c()}catch(a){c(a)}},!1),76861,a=>{"use strict";let b=(0,a.i(40541).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],76861)},86160,a=>{"use strict";let b=(0,a.i(40541).default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);a.s(["Power",()=>b],86160)},61359,a=>{"use strict";let b=(0,a.i(40541).default)("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["PowerOff",()=>b],61359)},62306,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(87080),g=a.i(85273),h=a.i(3883),i=a.i(57748),j=a.i(76861),k=a.i(66056),l=a.i(5227),m=a.i(68490),n=a.i(86160),o=a.i(61359),p=a.i(15887),q=a.i(34059),r=a.i(73170),s=b([g,h,p]);[g,h,p]=s.then?(await s)():s,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,s]=(0,e.useState)(!0),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(null),z=(0,r.useRouter)();(0,e.useEffect)(()=>{A(),B()},[]);let A=async()=>{try{let{data:{user:a}}=await f.supabase.auth.getUser();if(!a){p.toast.error("You must be logged in"),z.push("/admin/login");return}let{data:b,error:c}=await f.supabase.from("admin_users").select("role, is_active").eq("id",a.id).maybeSingle();if(c){console.error("Error checking permissions:",c),p.toast.error("Admin users table not set up yet. Please run the setup SQL."),z.push("/admin/dashboard");return}if(!b){p.toast.error("You are not registered as an admin user. Please run the setup SQL."),z.push("/admin/dashboard");return}if("super_admin"!==b.role||!b.is_active){p.toast.error("Only super admins can manage admin users"),z.push("/admin/dashboard");return}y(b.role)}catch(a){console.error("Error checking permissions:",a),p.toast.error("Failed to verify permissions"),z.push("/admin/dashboard")}},B=async()=>{try{let{data:a,error:c}=await f.supabase.from("admin_users").select("*").order("created_at",{ascending:!1});if(c)throw c;b(a||[])}catch(a){console.error("Error fetching admin users:",a),p.toast.error("Failed to load admin users")}finally{s(!1)}},C=async(a,b,c)=>{try{let{error:d}=await f.supabase.from("admin_users").update({is_active:!b}).eq("id",a);if(d)throw d;p.toast.success(`User ${c} ${!b?"activated":"deactivated"}`),B()}catch(a){console.error("Error updating user:",a),p.toast.error("Failed to update user status")}},D=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return c?(0,d.jsx)(g.default,{children:(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):(0,d.jsx)(i.default,{children:(0,d.jsxs)(g.default,{children:[(0,d.jsx)(q.default,{title:"Admin Users",noindex:!0}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Admin Users"}),(0,d.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage admin accounts and permissions"})]}),(0,d.jsxs)("button",{onClick:()=>{w(null),u(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center space-x-2 transition-colors",children:[(0,d.jsx)(j.UserPlus,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Create Admin"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Total Admins"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Active"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-green-600",children:a.filter(a=>a.is_active).length})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Super Admins"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:a.filter(a=>"super_admin"===a.role).length})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Inactive"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-red-600",children:a.filter(a=>!a.is_active).length})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,d.jsx)("thead",{className:"bg-slate-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Last Login"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:a.map(a=>{var b;let c,e=(b=a.role,(c={super_admin:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:l.ShieldCheck,label:"Super Admin"},admin:{color:"bg-navy-100 text-navy-800 border-navy-200",icon:k.Shield,label:"Admin"},editor:{color:"bg-green-100 text-green-800 border-green-200",icon:m.Edit2,label:"Editor"}})[b]||c.admin),f=e.icon;return(0,d.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.full_name}),(0,d.jsx)("div",{className:"text-sm text-slate-500",children:a.email})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("span",{className:`inline-flex items-center space-x-1 px-3 py-1 text-xs font-semibold rounded-full border ${e.color}`,children:[(0,d.jsx)(f,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:e.label})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:`inline-flex items-center space-x-1 px-3 py-1 text-xs font-semibold rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Power,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:"Active"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.PowerOff,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:"Inactive"})]})})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:D(a.last_login)}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:D(a.created_at)}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,d.jsx)("button",{onClick:()=>C(a.id,a.is_active,a.email),className:`${a.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"} transition-colors`,children:a.is_active?"Deactivate":"Activate"})})]},a.id)})})]})}),0===a.length&&(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsx)("p",{className:"text-slate-500",children:"No admin users found"})})]})]}),t&&(0,d.jsx)(h.default,{onClose:()=>u(!1),onSuccess:()=>{u(!1),B()}})]})})}]),c()}catch(a){c(a)}},!1),97554,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(62306),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/users",pathname:"/admin/users",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/users",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_67148a86._.js.map