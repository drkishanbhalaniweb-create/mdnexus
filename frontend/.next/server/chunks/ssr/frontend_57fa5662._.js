module.exports=[65957,a=>{"use strict";let b=(0,a.i(40541).default)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],65957)},1341,a=>{"use strict";let b=(0,a.i(40541).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],1341)},77682,a=>{"use strict";let b=(0,a.i(40541).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],77682)},70351,a=>{"use strict";let b=(0,a.i(40541).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],70351)},33565,a=>{"use strict";var b=a.i(87080);let c="blog",d=["image/jpeg","image/jpg","image/png","image/webp","image/gif"],e=a=>{let b=[];return a?(d.includes(a.type)||b.push("Invalid file type. Allowed: JPG, PNG, WebP, GIF"),a.size>5242880&&b.push("File too large. Maximum size: 5MB"),{valid:0===b.length,errors:b}):(b.push("No file provided"),{valid:!1,errors:b})},f=async(a,d="blog")=>{try{var f;let g,h,i,j=e(a);if(!j.valid)throw Error(j.errors.join(", "));let k=(f=a.name,g=Date.now(),h=Math.random().toString(36).substring(7),i=f.split(".").pop(),`${g}-${h}.${i}`),l=d?`${d}/${k}`:k,{data:m,error:n}=await b.supabase.storage.from(c).upload(l,a,{cacheControl:"3600",upsert:!1});if(n)throw n;let{data:{publicUrl:o}}=b.supabase.storage.from(c).getPublicUrl(l);return{url:o,path:l,success:!0}}catch(a){throw console.error("Error uploading image:",a),a}},g=async a=>{try{if(!a)throw Error("No file path provided");let{error:d}=await b.supabase.storage.from(c).remove([a]);if(d)throw d;return!0}catch(a){throw console.error("Error deleting image:",a),a}};a.s(["deleteBlogImage",0,g,"uploadBlogImage",0,f,"validateImage",0,e])},51347,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(65957),g=a.i(90836),h=a.i(77682),i=a.i(1341),j=a.i(15887),k=a.i(33565),l=b([j]);[j]=l.then?(await l)():l,a.s(["default",0,({onUploadComplete:a,existingImage:b=null,existingPath:c=null,folder:l="blog",label:m="Upload Image",showPreview:n=!0})=>{let[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(b),[s,t]=(0,e.useState)(c),[u,v]=(0,e.useState)(!1),w=(0,e.useRef)(null),x=(0,e.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?v(!0):"dragleave"===a.type&&v(!1)},[]),y=(0,e.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),v(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&z(a.dataTransfer.files[0])},[]),z=async b=>{let c=(0,k.validateImage)(b);if(!c.valid)return void j.toast.error(c.errors.join(", "));p(!0);try{if(s)try{await (0,k.deleteBlogImage)(s)}catch(a){console.warn("Could not delete old image:",a)}let c=await (0,k.uploadBlogImage)(b,l),d=URL.createObjectURL(b);r(d),t(c.path),a(c.url,c.path),j.toast.success("Image uploaded successfully!")}catch(a){console.error("Upload error:",a),j.toast.error("Failed to upload image: "+a.message)}finally{p(!1)}},A=async()=>{try{s&&await (0,k.deleteBlogImage)(s),r(null),t(null),a(null,null),w.current&&(w.current.value=""),j.toast.success("Image removed")}catch(a){console.error("Error removing image:",a),j.toast.error("Failed to remove image")}};return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:m}),q?n&&(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsx)("img",{src:q,alt:"Preview",className:"w-full h-64 object-cover rounded-lg border-2 border-slate-200"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-lg flex items-center justify-center",children:(0,d.jsxs)("button",{type:"button",onClick:A,className:"opacity-0 group-hover:opacity-100 transition-opacity px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center space-x-2",children:[(0,d.jsx)(g.X,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Remove Image"})]})}),(0,d.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs text-slate-500",children:[(0,d.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,d.jsx)(h.Image,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Image uploaded"})]}),(0,d.jsx)("button",{type:"button",onClick:A,className:"text-red-600 hover:text-red-700 font-medium",children:"Remove"})]})]}):(0,d.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-all ${u?"border-indigo-500 bg-indigo-50":"border-slate-300 hover:border-slate-400"} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:y,onClick:()=>{w.current?.click()},children:[(0,d.jsx)("input",{ref:w,type:"file",className:"hidden",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:a=>{a.preventDefault(),a.target.files&&a.target.files[0]&&z(a.target.files[0])},disabled:o}),o?(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)(i.Loader2,{className:"w-12 h-12 text-indigo-600 animate-spin mb-4"}),(0,d.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"Uploading..."})]}):(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)(f.Upload,{className:"w-12 h-12 text-slate-400 mb-4"}),(0,d.jsx)("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Click to upload or drag and drop"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"PNG, JPG, WebP, GIF up to 5MB"})]})]}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Recommended: 1200x630px for featured images, 800x600px for content images"})]})}]),c()}catch(a){c(a)}},!1),56009,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(73170),g=a.i(87080),h=a.i(85273),i=a.i(51347),j=a.i(57748),k=a.i(34059),l=a.i(70351),m=a.i(90836),n=a.i(15887),o=b([h,i,n]);[h,i,n]=o.then?(await o)():o,a.s(["default",0,()=>{let a=(0,f.useRouter)(),{id:b}=a.query,[c,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)({title:"",slug:"",excerpt:"",content_html:"",category:"nexus-letters",tags:[],author_name:"Military Disability Nexus",read_time:"5 min read",is_published:!1,published_at:new Date().toISOString().split("T")[0],featured_image:"",featured_image_path:""}),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)("");(0,e.useEffect)(()=>{b&&v()},[b]);let v=async()=>{try{let{data:a,error:c}=await g.supabase.from("blog_posts").select("*").eq("id",b).single();if(c)throw c;q({...a,published_at:a.published_at?.split("T")[0]||new Date().toISOString().split("T")[0]}),u(w(a.content_html))}catch(a){console.error("Error fetching post:",a),n.toast.error("Failed to load post")}},w=a=>a?a.replace(/<h2>(.*?)<\/h2>/g,"# $1\n\n").replace(/<h3>(.*?)<\/h3>/g,"## $1\n\n").replace(/<\/p>/g,"\n\n").replace(/<p>/g,"").replace(/<li>(.*?)<\/li>/g,"- $1\n").replace(/<\/?ul>/g,"\n").replace(/<br\s*\/?>/g,"\n").replace(/<[^>]+>/g,"").trim():"",x=a=>{let{name:b,value:c,type:d,checked:e}=a.target;q({...p,[b]:"checkbox"===d?e:c})},y=()=>{r.trim()&&!p.tags.includes(r.trim())&&(q({...p,tags:[...p.tags,r.trim()]}),s(""))},z=async c=>{c.preventDefault(),o(!0);try{let c={...p,published_at:p.published_at+"T00:00:00Z"},{error:d}=await g.supabase.from("blog_posts").update(c).eq("id",b);if(d)throw d;n.toast.success("Post updated successfully!"),a.push("/admin/blog")}catch(a){console.error("Error saving post:",a),n.toast.error("Failed to save post: "+a.message)}finally{o(!1)}};return(0,d.jsx)(j.default,{children:(0,d.jsxs)(h.default,{children:[(0,d.jsx)(k.default,{title:"Edit Blog Post",noindex:!0}),(0,d.jsxs)("div",{className:"max-w-4xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Edit Blog Post"}),(0,d.jsx)("button",{onClick:()=>a.push("/admin/blog"),className:"text-slate-600 hover:text-slate-900",children:(0,d.jsx)(m.X,{className:"w-6 h-6"})})]}),(0,d.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Post Details"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Title *"}),(0,d.jsx)("input",{type:"text",name:"title",value:p.title,onChange:a=>{let b=a.target.value;q({...p,title:b,slug:b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")})},required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Slug (URL) *"}),(0,d.jsx)("input",{type:"text",name:"slug",value:p.slug,onChange:x,required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsx)(i.default,{onUploadComplete:(a,b)=>{q({...p,featured_image:a||"",featured_image_path:b||""})},existingImage:p.featured_image,existingPath:p.featured_image_path,folder:"featured",label:"Featured Image"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Excerpt *"}),(0,d.jsx)("textarea",{name:"excerpt",value:p.excerpt,onChange:x,required:!0,rows:"2",placeholder:"Brief summary of the post",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Content *"}),(0,d.jsxs)("div",{className:"mb-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-600",children:[(0,d.jsx)("p",{className:"font-semibold mb-2",children:"Formatting Guide:"}),(0,d.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,d.jsxs)("li",{children:["• ",(0,d.jsx)("strong",{children:"# Heading"})," - Creates a main heading"]}),(0,d.jsxs)("li",{children:["• ",(0,d.jsx)("strong",{children:"## Subheading"})," - Creates a subheading"]}),(0,d.jsxs)("li",{children:["• ",(0,d.jsx)("strong",{children:"- Item"})," - Creates a bullet point"]}),(0,d.jsx)("li",{children:"• Leave blank lines between paragraphs"})]})]}),(0,d.jsx)("textarea",{value:t,onChange:a=>{let b=a.target.value;u(b),q({...p,content_html:b?b.split("\n\n").map(a=>{if(!(a=a.trim()))return"";if(a.startsWith("## "))return`<h3>${a.substring(3)}</h3>`;if(a.startsWith("# "))return`<h2>${a.substring(2)}</h2>`;if(a.includes("\n-")||a.includes("\n*")||a.startsWith("-")||a.startsWith("*")){let b=a.split("\n").filter(a=>a.trim()).map(a=>{let b=a.replace(/^[-*]\s*/,"").trim();return b?`<li>${b}</li>`:""}).filter(Boolean).join("");return`<ul>${b}</ul>`}return`<p>${a}</p>`}).join(""):""})},required:!0,rows:"16",placeholder:"# Main Heading  Write your content here. Leave blank lines between paragraphs.  ## Subheading  More content here.  - Bullet point 1 - Bullet point 2 - Bullet point 3",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Write naturally - formatting will be applied automatically"})]}),t&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preview"}),(0,d.jsx)("div",{className:"p-4 border border-slate-300 rounded-lg bg-slate-50 prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:p.content_html}})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category *"}),(0,d.jsxs)("select",{name:"category",value:p.category,onChange:x,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,d.jsx)("option",{value:"nexus-letters",children:"Nexus Letters"}),(0,d.jsx)("option",{value:"exam-prep",children:"Exam Prep"}),(0,d.jsx)("option",{value:"aid-attendance",children:"Aid & Attendance"}),(0,d.jsx)("option",{value:"1151-claims",children:"1151 Claims"}),(0,d.jsx)("option",{value:"general",children:"General"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Read Time"}),(0,d.jsx)("input",{type:"text",name:"read_time",value:p.read_time,onChange:x,placeholder:"5 min read",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Author Name"}),(0,d.jsx)("input",{type:"text",name:"author_name",value:p.author_name,onChange:x,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Publish Date"}),(0,d.jsx)("input",{type:"date",name:"published_at",value:p.published_at,onChange:x,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Tags"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,d.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),y()),placeholder:"Add a tag",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,d.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 bg-slate-200 rounded-lg hover:bg-slate-300",children:"Add"})]}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:p.tags.map((a,b)=>(0,d.jsxs)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm flex items-center space-x-2",children:[(0,d.jsx)("span",{children:a}),(0,d.jsx)("button",{type:"button",onClick:()=>{q({...p,tags:p.tags.filter(b=>b!==a)})},className:"text-indigo-600 hover:text-indigo-800",children:"×"})]},b))})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",name:"is_published",checked:p.is_published,onChange:x,className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),(0,d.jsx)("label",{className:"ml-2 text-sm font-semibold text-slate-700",children:"Published (visible on website)"})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,d.jsx)("button",{type:"button",onClick:()=>a.push("/admin/blog"),className:"px-6 py-3 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:[(0,d.jsx)(l.Save,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:c?"Saving...":"Update Post"})]})]})]})]})]})})}]),c()}catch(a){c(a)}},!1),63301,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(56009),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/blog/edit/[id]",pathname:"/admin/blog/edit/[id]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/blog/edit/[id]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_57fa5662._.js.map