module.exports=[68567,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(73170),g=a.i(87080),h=a.i(85273),i=a.i(57748),j=a.i(70351),k=a.i(90836),l=a.i(15887),m=a.i(34059),n=b([h,l]);[h,l]=n.then?(await n)():n,a.s(["default",0,()=>{let a=(0,f.useRouter)(),{id:b}=a.query,[c,n]=(0,e.useState)(!1),[o,p]=(0,e.useState)({title:"",slug:"",excerpt:"",challenge:"",solution:"",results:"",key_takeaway:"",is_published:!1,published_at:new Date().toISOString().split("T")[0],tags:[]}),[q,r]=(0,e.useState)({challenge:"",solution:"",results:"",key_takeaway:""});(0,e.useEffect)(()=>{b&&s()},[b]);let s=async()=>{try{let{data:a,error:c}=await g.supabase.from("case_studies").select("*").eq("id",b).single();if(c)throw c;p({...a,published_at:a.published_at?.split("T")[0]||new Date().toISOString().split("T")[0]}),r({challenge:t(a.challenge||""),solution:t(a.solution||""),results:t(a.results||""),key_takeaway:t(a.key_takeaway||"")})}catch(a){console.error("Error fetching case study:",a),l.toast.error("Failed to load case study")}},t=a=>a?a.replace(/<h2>(.*?)<\/h2>/g,"# $1\n\n").replace(/<h3>(.*?)<\/h3>/g,"## $1\n\n").replace(/<\/p>/g,"\n\n").replace(/<p>/g,"").replace(/<li>(.*?)<\/li>/g,"- $1\n").replace(/<\/?ul>/g,"\n").replace(/<br\s*\/?>/g,"\n").replace(/<[^>]+>/g,"").trim():"",u=(a,b)=>{r({...q,[a]:b}),p({...o,[a]:b?b.split("\n\n").map(a=>{if(!(a=a.trim()))return"";if(a.startsWith("## "))return`<h3>${a.substring(3)}</h3>`;if(a.startsWith("# "))return`<h2>${a.substring(2)}</h2>`;if(a.includes("\n-")||a.includes("\n*")||a.startsWith("-")||a.startsWith("*")){let b=a.split("\n").filter(a=>a.trim()).map(a=>{let b=a.replace(/^[-*]\s*/,"").trim();return b?`<li>${b}</li>`:""}).filter(Boolean).join("");return`<ul>${b}</ul>`}return`<p>${a}</p>`}).join(""):""})},v=a=>{let{name:b,value:c,type:d,checked:e}=a.target;p({...o,[b]:"checkbox"===d?e:c})},w=async c=>{if(c.preventDefault(),!o.challenge||!q.challenge.trim())return void l.toast.error("Challenge is required");n(!0);try{let c={title:o.title,slug:o.slug,excerpt:o.excerpt,content_html:o.challenge,challenge:o.challenge,solution:o.solution||null,results:o.results||null,key_takeaway:o.key_takeaway||null,tags:o.tags||[],is_published:o.is_published,published_at:o.published_at+"T00:00:00Z"},{error:d}=await g.supabase.from("case_studies").update(c).eq("id",b);if(d)throw d;l.toast.success("Case study updated successfully!"),a.push("/admin/case-studies")}catch(a){console.error("Error saving case study:",a),l.toast.error("Failed to save case study: "+a.message)}finally{n(!1)}};return(0,d.jsx)(i.default,{children:(0,d.jsxs)(h.default,{children:[(0,d.jsx)(m.default,{title:"Edit Case Study",noindex:!0}),(0,d.jsxs)("div",{className:"max-w-4xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Edit Case Study"}),(0,d.jsx)("button",{onClick:()=>a.push("/admin/case-studies"),className:"text-slate-600 hover:text-slate-900",children:(0,d.jsx)(k.X,{className:"w-6 h-6"})})]}),(0,d.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Case Study Details"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Title *"}),(0,d.jsx)("input",{type:"text",name:"title",value:o.title,onChange:a=>{let b=a.target.value;p({...o,title:b,slug:b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")})},required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Slug (URL) *"}),(0,d.jsx)("input",{type:"text",name:"slug",value:o.slug,onChange:v,required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Excerpt *"}),(0,d.jsx)("textarea",{name:"excerpt",value:o.excerpt,onChange:v,required:!0,rows:"3",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief summary of the case study..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Tags"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:["SMC/Aid & Attendance","Primary Service Connection","Secondary Service Connection","Mental Health Claim","1151 Claim","Claim Readiness Review"].map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>{let b,c;return c=(b=o.tags||[]).includes(a)?b.filter(b=>b!==a):[...b,a],void p({...o,tags:c})},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${(o.tags||[]).includes(a)?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a},a))})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Published Date *"}),(0,d.jsx)("input",{type:"date",name:"published_at",value:o.published_at,onChange:v,required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",name:"is_published",checked:o.is_published,onChange:v,className:"w-5 h-5 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),(0,d.jsx)("span",{className:"text-sm font-semibold text-slate-700",children:"Published"})]})})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Content Sections"}),(0,d.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:'Use bullet points with "- " at the start of each line. Use blank lines between paragraphs.'}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Challenge * ",(0,d.jsx)("span",{className:"text-red-500",children:"(Required)"})]}),(0,d.jsx)("textarea",{value:q.challenge,onChange:a=>u("challenge",a.target.value),required:!0,rows:"6",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",placeholder:"Describe the challenge or problem...  Use bullet points: - First point - Second point"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"What Existed Before (Optional)"}),(0,d.jsx)("textarea",{value:q.solution,onChange:a=>u("solution",a.target.value),rows:"6",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",placeholder:"Describe what existed before or previous attempts...  Use bullet points: - First point - Second point"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Our Contribution (Optional)"}),(0,d.jsx)("textarea",{value:q.results,onChange:a=>u("results",a.target.value),rows:"6",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",placeholder:"Describe our contribution and outcomes...  Use bullet points: - First point - Second point"})]}),(0,d.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-amber-800 mb-2",children:"Key Takeaway (Optional) - Yellow Highlight Box"}),(0,d.jsx)("textarea",{value:q.key_takeaway,onChange:a=>u("key_takeaway",a.target.value),rows:"4",className:"w-full px-4 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 font-mono text-sm bg-white",placeholder:"Key takeaway or important note to highlight...  Use bullet points: - First point - Second point"}),(0,d.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"This will appear in a yellow highlighted box on the public page"})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,d.jsx)("button",{type:"button",onClick:()=>a.push("/admin/case-studies"),className:"px-6 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",disabled:c,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[(0,d.jsx)(j.Save,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:c?"Saving...":"Update Case Study"})]})]})]})]})]})})}]),c()}catch(a){c(a)}},!1),31948,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(68567),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/case-studies/edit/[id]",pathname:"/admin/case-studies/edit/[id]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/case-studies/edit/[id]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_db0402e6._.js.map