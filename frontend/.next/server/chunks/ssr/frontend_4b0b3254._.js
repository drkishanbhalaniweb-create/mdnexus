module.exports=[45940,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(60302),f=a.i(73170),g=a.i(27669),h=a.i(48338),i=a.i(21419),j=a.i(50944),k=a.i(18074),l=a.i(52047),m=a.i(63711),n=a.i(79587),o=a.i(87080),p=a.i(34059),q=a.i(37654),r=a.i(15887),s=b([r]);async function t(){try{let{data:a}=await o.supabase.from("community_questions").select("slug").eq("status","published").order("created_at",{ascending:!1}).limit(50);return{paths:(a||[]).map(a=>({params:{slug:a.slug}})),fallback:"blocking"}}catch(a){return console.error("Error getting static paths for questions:",a),{paths:[],fallback:"blocking"}}}async function u({params:a}){try{let{data:b,error:c}=await o.supabase.from("community_questions").select("*").eq("slug",a.slug).eq("status","published").single();if(c||!b)return{notFound:!0};let{data:d}=await o.supabase.from("community_answers").select("*").eq("question_id",b.id).eq("status","published").order("is_expert_answer",{ascending:!1,nullsFirst:!1}).order("is_best_answer",{ascending:!1,nullsFirst:!1}).order("upvotes",{ascending:!1});return{props:{initialQuestion:b,initialAnswers:d||[]},revalidate:60}}catch(b){return console.error(`Error fetching question for slug ${a.slug}:`,b),{notFound:!0}}}[r]=s.then?(await s)():s,a.s(["default",0,({initialQuestion:a,initialAnswers:b})=>{let c=(0,f.useRouter)(),[s,t]=(0,g.useState)(a),[u,v]=(0,g.useState)(b||[]),[w,x]=(0,g.useState)(null),[y,z]=(0,g.useState)(""),[A,B]=(0,g.useState)(""),[C,D]=(0,g.useState)(""),[E,F]=(0,g.useState)(!1),[G,H]=(0,g.useState)(!1);(0,g.useEffect)(()=>{J(),s?.id&&I(s.id)},[]);let I=async a=>{await o.supabase.from("community_questions").update({views_count:(s.views_count||0)+1}).eq("id",a)},J=async()=>{let{data:{user:a}}=await o.supabase.auth.getUser();x(a)},K=async(a,b,c,d)=>{if(!w)return void r.toast.error("Please sign in to vote");let e="up"===a?"upvotes":"downvotes",f=(d||0)+1;try{await o.supabase.from("question"===b?"community_questions":"community_answers").update({[e]:f}).eq("id",c),"question"===b?t({...s,[e]:f}):v(u.map(a=>a.id===c?{...a,[e]:f}:a)),r.toast.success("Vote recorded!")}catch(a){r.toast.error("Failed to vote")}},L=async a=>{if(a.preventDefault(),!y.trim())return void r.toast.error("Please enter your answer");F(!0);try{let{data:a,error:b}=await o.supabase.from("community_answers").insert({question_id:s.id,user_id:w?.id||null,content:y.trim(),is_anonymous:G,display_name:G?null:A.trim()||"Community Member",user_email:C.trim()||null,status:"published"}).select().single();if(b)throw b;a&&(v(b=>[...b,a]),t(a=>({...a,answers_count:(a.answers_count||0)+1}))),await o.supabase.from("community_questions").update({answers_count:(s.answers_count||0)+1}).eq("id",s.id),r.toast.success("Answer posted successfully!"),z(""),B(""),D(""),H(!1),c.replace(c.asPath)}catch(a){console.error("Error posting answer:",a),r.toast.error("Failed to post answer")}finally{F(!1)}};return c.isFallback?(0,d.jsx)(q.default,{children:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-navy-700"})})}):s?(0,d.jsxs)(q.default,{children:[(0,d.jsx)(p.default,{title:s.title+" | Community",description:s.content.substring(0,160),breadcrumbs:[{name:"Home",path:"/"},{name:"Community",path:"/community"},{name:s.title,path:`/community/question/${s.slug}`}]}),(0,d.jsxs)("div",{className:"relative min-h-screen overflow-hidden",children:[(0,d.jsxs)("div",{className:"fixed inset-0 z-0 overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:'url("/blogimg.png")',filter:"blur(4px)",transform:"scale(1.1)",width:"100%",height:"100%"},role:"presentation","aria-hidden":"true"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-white/50"})]}),(0,d.jsx)("div",{className:"relative z-10 py-12",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)(e.default,{href:"/community",className:"inline-flex items-center gap-2 text-slate-600 hover:text-navy-700 mb-6 font-semibold transition-colors",children:[(0,d.jsx)(l.ArrowLeft,{className:"w-4 h-4"}),"Back to Community"]}),(0,d.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 p-6 mb-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:s.title}),(0,d.jsx)("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(k.User,{className:"w-4 h-4"}),s.is_anonymous?"Anonymous":s.display_name||"User"]})}),(0,d.jsx)("p",{className:"text-slate-700 whitespace-pre-wrap mb-6",children:s.content}),(0,d.jsxs)("div",{className:"flex items-center gap-4 pt-4 border-t border-slate-100",children:[(0,d.jsxs)("button",{onClick:()=>K("up","question",s.id,s.upvotes),className:"flex items-center gap-1 text-slate-500 hover:text-emerald-600 transition-colors",children:[(0,d.jsx)(h.ThumbsUp,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:s.upvotes||0})]}),(0,d.jsxs)("button",{onClick:()=>K("down","question",s.id,s.downvotes),className:"flex items-center gap-1 text-slate-500 hover:text-red-600 transition-colors",children:[(0,d.jsx)(i.ThumbsDown,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:s.downvotes||0})]})]})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("h2",{className:"text-xl font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,d.jsx)(j.MessageSquare,{className:"w-5 h-5"}),u.length," ",1===u.length?"Answer":"Answers"]}),0===u.length?(0,d.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 p-6 text-center",children:(0,d.jsx)("p",{className:"text-slate-500",children:"No answers yet. Be the first to help!"})}):(0,d.jsx)("div",{className:"space-y-4",children:u.map(a=>(0,d.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border p-6 relative "+(a.is_expert_answer?"border-amber-400 border-2":a.is_best_answer?"border-emerald-500 border-2":"border-white/40"),children:[a.is_expert_answer&&(0,d.jsxs)("div",{className:"absolute -top-3 right-4 flex items-center gap-1.5 px-3 py-1 bg-amber-400 text-amber-900 text-sm font-semibold rounded-full shadow-md",children:[(0,d.jsx)(n.Award,{className:"w-4 h-4"}),"Expert Answer"]}),a.is_best_answer&&!a.is_expert_answer&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 mb-3",children:[(0,d.jsx)(m.CheckCircle,{className:"w-5 h-5"}),(0,d.jsx)("span",{className:"font-medium",children:"Accepted Answer"})]}),(0,d.jsx)("p",{className:"text-slate-700 whitespace-pre-wrap mb-4 mt-2",children:a.content}),(0,d.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("button",{onClick:()=>K("up","answer",a.id,a.upvotes),className:"flex items-center gap-1 text-slate-500 hover:text-emerald-600 transition-colors",children:[(0,d.jsx)(h.ThumbsUp,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:a.upvotes||0})]}),(0,d.jsxs)("button",{onClick:()=>K("down","answer",a.id,a.downvotes),className:"flex items-center gap-1 text-slate-500 hover:text-red-600 transition-colors",children:[(0,d.jsx)(i.ThumbsDown,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:a.downvotes||0})]})]}),(0,d.jsx)("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(k.User,{className:"w-4 h-4"}),a.is_anonymous?"Anonymous":a.display_name||"User"]})})]})]},a.id))})]}),(0,d.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Your Answer"}),(0,d.jsxs)("form",{onSubmit:L,children:[(0,d.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),placeholder:"Share your knowledge or experience...",rows:5,className:"w-full px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none mb-4",required:!0}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Display Name ",!G&&(0,d.jsx)("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),(0,d.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),placeholder:"Your name",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none",disabled:G})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Email ",(0,d.jsx)("span",{className:"text-slate-500 font-normal",children:"(for notifications, not shown)"})]}),(0,d.jsx)("input",{type:"email",value:C,onChange:a=>D(a.target.value),placeholder:"your@email.com",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none"})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:G,onChange:a=>H(a.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"#B91C3C"}}),(0,d.jsx)("span",{className:"text-sm text-slate-600",children:"Post anonymously"})]}),(0,d.jsx)("button",{type:"submit",disabled:E,className:"px-6 py-2 text-white rounded-lg hover:opacity-90 disabled:opacity-50 transition-opacity shadow-lg",style:{backgroundColor:"#B91C3C"},children:E?"Posting...":"Post Answer"})]})]})]})]})})]})]}):(0,d.jsx)(q.default,{children:(0,d.jsx)("div",{className:"relative min-h-screen overflow-hidden",children:(0,d.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto px-4 text-center py-12",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Question not found"}),(0,d.jsx)(e.default,{href:"/community",className:"text-navy-700 hover:text-navy-800 font-semibold",children:"Back to Community"})]})})})},"getStaticPaths",()=>t,"getStaticProps",()=>u]),c()}catch(a){c(a)}},!1),22941,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(45940),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/community/question/[slug]",pathname:"/community/question/[slug]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/community/question/[slug]",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_4b0b3254._.js.map