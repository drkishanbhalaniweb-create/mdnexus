module.exports=[41415,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(60302),f=a.i(73170),g=a.i(27669),h=a.i(50944),i=a.i(48338),j=a.i(21419),k=a.i(36238),l=a.i(73586),m=a.i(64817),n=a.i(18074),o=a.i(56643),p=a.i(87080),q=a.i(34059),r=a.i(37654),s=a.i(15887),t=b([s]);[s]=t.then?(await t)():t;let v=["Nexus Letter","1151 Claim","Aid & Attendance/SMC","Primary Connection","Secondary Connection","Migraine/Headaches","Tinnitus","Obstructive Sleep Apnea","IBS","GERD","PACT Act","Mental Health","Orthopedic/Chronic Pain","Evidence & Documentation","C&P Exam","Heart Condition/Hypertension","Kidney Claims","Cancer","Others"];async function u(){try{let{data:a,error:b}=await p.supabase.from("community_questions").select("*").eq("status","published").order("created_at",{ascending:!1}).limit(50);if(b)throw b;return{props:{initialQuestions:a||[]},revalidate:60}}catch(a){return console.error("Error fetching questions for static props:",a),{props:{initialQuestions:[]},revalidate:60}}}a.s(["default",0,({initialQuestions:a})=>{let b=(0,f.useRouter)(),[c,t]=(0,g.useState)(a||[]),[u,w]=(0,g.useState)(!1),[x,y]=(0,g.useState)(""),[z,A]=(0,g.useState)("recent"),[B,C]=(0,g.useState)([]),[D,E]=(0,g.useState)(null),[F,G]=(0,g.useState)(!1),[H,I]=(0,g.useState)(!1),[J,K]=(0,g.useState)({title:"",content:"",is_anonymous:!1,display_name:"",user_email:"",tags:[]});(0,g.useEffect)(()=>{L()},[]),(0,g.useEffect)(()=>{"recent"!==z||x||B.length>0?M():c!==a&&0===c.length&&t(a)},[z]);let L=async()=>{let{data:{user:a}}=await p.supabase.auth.getUser();E(a)},M=async()=>{w(!0);try{let a=p.supabase.from("community_questions").select("*").eq("status","published");"recent"===z?a=a.order("created_at",{ascending:!1}):"popular"===z?a=a.order("upvotes",{ascending:!1}):"unanswered"===z&&(a=a.eq("answers_count",0).order("created_at",{ascending:!1}));let{data:b,error:c}=await a.limit(50);if(c)throw c;t(b||[])}catch(a){console.error("Error fetching questions:",a)}finally{w(!1)}},N=a=>a.trim().split(/\s+/).filter(a=>a.length>0).length,O=async a=>{if(a.preventDefault(),!J.title.trim())return void s.toast.error("Please fill in the title");if(!J.user_email.trim())return void s.toast.error("Please provide an email for notifications");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J.user_email))return void s.toast.error("Please provide a valid email address");if(J.content.trim()&&N(J.content)>200)return void s.toast.error("Details must be 200 words or less");I(!0);try{let{data:a,error:c}=await p.supabase.from("community_questions").insert({user_id:D?.id||"00000000-0000-0000-0000-000000000000",title:J.title.trim(),content:J.content.trim(),is_anonymous:J.is_anonymous,display_name:J.is_anonymous?null:J.display_name||"Anonymous",user_email:J.user_email.trim(),tags:J.tags||[]}).select().single();if(c)throw c;s.toast.success("Question posted! You'll receive an email when someone answers."),K({title:"",content:"",is_anonymous:!1,display_name:"",user_email:"",tags:[]}),G(!1),M(),a?.slug&&b.push("/community/question/"+a.slug)}catch(a){console.error("Error:",a),s.toast.error("Failed to post question")}finally{I(!1)}},P=c.filter(a=>{let b=a.title.toLowerCase().includes(x.toLowerCase())||a.content.toLowerCase().includes(x.toLowerCase()),c=0===B.length||a.tags&&a.tags.some(a=>B.includes(a));return b&&c}),Q=async(a,b,d,e)=>{if(a.preventDefault(),a.stopPropagation(),!D)return void s.toast.error("Please sign in to vote");let f="up"===d?"upvotes":"downvotes",g=(e||0)+1;try{await p.supabase.from("community_questions").update({[f]:g}).eq("id",b),t(c.map(a=>a.id===b?{...a,[f]:g}:a)),s.toast.success("Vote recorded!")}catch(a){s.toast.error("Failed to vote")}};return(0,d.jsxs)(r.default,{children:[(0,d.jsx)(q.default,{title:"Community Q and A | VA Benefits Questions",description:"Ask questions and get answers about VA benefits.",breadcrumbs:[{name:"Home",path:"/"},{name:"Community",path:"/community"}]}),(0,d.jsxs)("div",{className:"relative min-h-screen overflow-hidden",children:[(0,d.jsxs)("div",{className:"fixed inset-0 z-0 overflow-hidden",children:[(0,d.jsx)("img",{src:"/blogimg.png",alt:"Background pattern",className:"absolute inset-0 w-full h-full object-cover",style:{filter:"blur(4px)",transform:"scale(1.1)"},role:"presentation","aria-hidden":"true"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-white/50"})]}),(0,d.jsx)("div",{className:"relative z-10 py-12",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,d.jsx)("section",{className:"py-8 mb-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-br from-navy-600 to-navy-800 text-white px-4 py-2 rounded-full text-sm font-semibold mb-6 shadow-lg",children:[(0,d.jsx)(h.MessageSquare,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"COMMUNITY Q&A"})]}),(0,d.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-slate-900 mb-4 drop-shadow-sm",children:"Community Q and A"}),(0,d.jsx)("p",{className:"text-lg text-slate-700 max-w-2xl mx-auto",children:"Ask questions about VA benefits and get answers from our community."})]})}),(0,d.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 p-4 mb-6 flex flex-col sm:flex-row gap-4",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,d.jsx)("input",{type:"text",placeholder:"Search questions...",value:x,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(o.Filter,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,d.jsxs)("select",{value:z,onChange:a=>A(a.target.value),className:"pl-9 pr-8 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none appearance-none bg-white",children:[(0,d.jsx)("option",{value:"recent",children:"Most Recent"}),(0,d.jsx)("option",{value:"popular",children:"Most Popular"}),(0,d.jsx)("option",{value:"unanswered",children:"Unanswered"})]})]}),(0,d.jsxs)("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity shadow-lg",style:{backgroundColor:"#B91C3C"},children:[(0,d.jsx)(m.Plus,{className:"w-4 h-4"}),"Ask Question"]})]})]}),(0,d.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 p-4 mb-6",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Filter by Tags"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map(a=>(0,d.jsx)("button",{onClick:()=>{C(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${B.includes(a)?"bg-navy-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a},a))}),B.length>0&&(0,d.jsx)("button",{onClick:()=>C([]),className:"mt-3 text-sm text-navy-600 hover:text-navy-800 font-medium",children:"Clear all filters"})]}),F&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,d.jsx)("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Ask a Question"}),(0,d.jsxs)("form",{onSubmit:O,children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Question Title"}),(0,d.jsx)("input",{type:"text",value:J.title,onChange:a=>K({...J,title:a.target.value}),placeholder:"What would you like to know?",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none",required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:["Details ",(0,d.jsx)("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),(0,d.jsxs)("span",{className:`text-xs font-medium ${N(J.content)>200?"text-red-600":"text-slate-500"}`,children:[N(J.content),"/200 words"]})]}),(0,d.jsx)("textarea",{value:J.content,onChange:a=>K({...J,content:a.target.value}),placeholder:"Provide more details...",rows:5,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none ${N(J.content)>200?"border-red-300":"border-slate-200"}`})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Display Name (optional)"}),(0,d.jsx)("input",{type:"text",value:J.display_name,onChange:a=>K({...J,display_name:a.target.value}),placeholder:"Your display name",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none",disabled:J.is_anonymous})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Email ",(0,d.jsx)("span",{className:"text-red-600",children:"*"}),(0,d.jsx)("span",{className:"text-xs text-slate-500 ml-2",children:"(for notifications only, not displayed publicly)"})]}),(0,d.jsx)("input",{type:"email",value:J.user_email,onChange:a=>K({...J,user_email:a.target.value}),placeholder:"your@email.com",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-navy-600 focus:outline-none",required:!0}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"We'll notify you when someone answers your question"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tags (select relevant topics)"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto p-2 border border-slate-200 rounded-lg",children:v.map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>{let b,c;return c=(b=J.tags||[]).includes(a)?b.filter(b=>b!==a):[...b,a],void K({...J,tags:c})},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${(J.tags||[]).includes(a)?"bg-navy-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a},a))})]}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:J.is_anonymous,onChange:a=>K({...J,is_anonymous:a.target.checked}),className:"w-4 h-4 rounded",style:{accentColor:"#B91C3C"}}),(0,d.jsx)("span",{className:"text-sm text-slate-600",children:"Post anonymously"})]})}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,d.jsx)("button",{type:"button",onClick:()=>G(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:H,className:"px-6 py-2 text-white rounded-lg hover:opacity-90 disabled:opacity-50 transition-opacity shadow-lg",style:{backgroundColor:"#B91C3C"},children:H?"Posting...":"Post Question"})]})]})]})})}),u?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-navy-700 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-slate-600",children:"Loading questions..."})]}):0===P.length?(0,d.jsxs)("div",{className:"text-center py-12 bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40",children:[(0,d.jsx)(h.MessageSquare,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"No questions yet"}),(0,d.jsx)("p",{className:"text-slate-500 mb-4",children:"Be the first to ask a question!"}),(0,d.jsxs)("button",{onClick:()=>G(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity shadow-lg",style:{backgroundColor:"#B91C3C"},children:[(0,d.jsx)(m.Plus,{className:"w-4 h-4"}),"Ask Question"]})]}):(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h2",{className:"sr-only",children:"Recent Discussions"}),P.map(a=>(0,d.jsx)("article",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/40 hover:shadow-2xl transition-all p-6",children:(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"hidden sm:flex flex-col items-center gap-1 text-center min-w-[50px]",children:[(0,d.jsx)("button",{onClick:b=>Q(b,a.id,"up",a.upvotes),className:"p-1 text-slate-400 hover:text-emerald-600 transition-colors rounded hover:bg-emerald-50",children:(0,d.jsx)(i.ThumbsUp,{className:"w-5 h-5"})}),(0,d.jsx)("span",{className:"text-lg font-semibold text-slate-700",children:(a.upvotes||0)-(a.downvotes||0)}),(0,d.jsx)("button",{onClick:b=>Q(b,a.id,"down",a.downvotes),className:"p-1 text-slate-400 hover:text-red-600 transition-colors rounded hover:bg-red-50",children:(0,d.jsx)(j.ThumbsDown,{className:"w-5 h-5"})}),(0,d.jsx)("span",{className:"text-xs text-slate-500",children:"votes"})]}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)(e.default,{href:"/community/question/"+a.slug,className:"block group",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 group-hover:text-navy-700 mb-2 line-clamp-2 transition-colors",children:a.title}),(0,d.jsx)("p",{className:"text-slate-600 text-sm line-clamp-2 mb-3",children:a.content}),a.tags&&a.tags.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:a.tags.map((a,b)=>(0,d.jsx)("span",{className:"inline-block bg-navy-100 text-navy-700 px-2 py-0.5 rounded text-xs font-medium",children:a},b))})]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-500",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(n.User,{className:"w-4 h-4"}),a.is_anonymous?"Anonymous":a.display_name||"User"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(k.Eye,{className:"w-4 h-4"}),a.views_count||0," views"]}),(0,d.jsxs)("div",{className:"sm:hidden flex items-center gap-2",children:[(0,d.jsxs)("button",{onClick:b=>Q(b,a.id,"up",a.upvotes),className:"flex items-center gap-1 text-slate-500 hover:text-emerald-600 transition-colors",children:[(0,d.jsx)(i.ThumbsUp,{className:"w-4 h-4"}),a.upvotes||0]}),(0,d.jsxs)("button",{onClick:b=>Q(b,a.id,"down",a.downvotes),className:"flex items-center gap-1 text-slate-500 hover:text-red-600 transition-colors",children:[(0,d.jsx)(j.ThumbsDown,{className:"w-4 h-4"}),a.downvotes||0]})]}),(0,d.jsxs)("span",{className:"sm:hidden flex items-center gap-1",children:[(0,d.jsx)(h.MessageSquare,{className:"w-4 h-4"}),a.answers_count||0]})]})]}),(0,d.jsxs)("div",{className:"hidden sm:flex flex-col items-center justify-center px-3 py-2 rounded-lg min-w-[60px] "+(a.answers_count>0?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"),children:[(0,d.jsx)("span",{className:"text-lg font-semibold",children:a.answers_count||0}),(0,d.jsx)("span",{className:"text-xs",children:"answers"})]})]})},a.id))]})]})})]})]})},"getStaticProps",()=>u]),c()}catch(a){c(a)}},!1),93357,a=>a.a(async(b,c)=>{try{var d=a.i(8189),e=a.i(2278),f=a.i(7859),g=a.i(41921),h=a.i(7785),i=a.i(41415),j=a.i(55022),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/community/index",pathname:"/community",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/community/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=frontend_2463ba6c._.js.map